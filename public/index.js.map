{"version":3,"sources":["app/index.coffee","app/utils/http.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAAA,UAAU,QAAQ,cAAR;;AAEJ;;;kBAEF,SAAQ,SAAC,UAAD,EAAa,QAAb;AACJ;IAAA,UACI;MAAA,QAAQ,MAAR;MACA,KAAK,eADL;MAEA,YAAY,UAFZ;;WAIJ,QAAQ,OAAR,EAAiB,SAAC,GAAD,EAAM,IAAN;MACb,IAAG,GAAH;QACI,MAAM,GAAN,EADJ;OAAA;QAGI,OAAO,CAAC,GAAR,CAAY,IAAZ,EAHJ;;aAKA,SAAS,GAAT,EAAc,IAAd;IANa,CAAjB;EANI;;;;;;AAeZ,MAAM,CAAC,OAAO,CAAC,QAAf,GAA0B,SAAC,WAAD,EAAc,MAAd;AAEtB,SAAW;AAFW;;;AAO1B;;;;;;;;;;;;AC1BA,MAAM,CAAC,OAAP,GAAiB,SAAC,OAAD,EAAU,QAAV;AAEb;EAAA,SAAS,OAAO,CAAC,MAAR,IAAkB;EAC1B,iBAAD,EAAM;EAEN,MAAU;EACV,GAAG,CAAC,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,IAAtB;EAEA,GAAG,CAAC,MAAJ,GAAa;WACT,SAAS,IAAT,EAAe,GAAG,CAAC,QAAnB;EADS;EAGb,GAAG,CAAC,OAAJ,GAAc,SAAC,GAAD;IACV,MAAM,qBAAmB,GAAG,CAAC,MAAM,CAAC;WACpC,SAAS,GAAT;EAFU;SAId,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,SAAC,KAAD;AAC/B;IAAA,SAAS,KAAK,CAAC;IACf,GAAG,CAAC,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;IACA,QAAQ,KAAQ,MAAM,CAAC,OAAR,GAAgB,GAAhB,GAAmB,MAAM,CAAC,KAAjC;IACR,GAAG,CAAC,gBAAJ,CAAqB,eAArB,EAAsC,WAAS,KAA/C;IAEA,IAAG,kBAAH;aACI,GAAG,CAAC,IAAJ,CAAS,IAAI,CAAC,SAAL,CAAe,UAAf,CAAT,EADJ;KAAA;aAGI,GAAG,CAAC,IAAJ,GAHJ;;EAN+B,CAAnC,EAUE,IAVF;AAfa","file":"public/index.js","sourcesContent":["request = require './utils/http'\n\nclass Model\n\n    create: (attributes, callback) ->\n        options =\n            method: 'POST'\n            url: '/ds-api/data/'\n            attributes: attributes\n\n        request options, (err, body) ->\n            if err\n                alert err\n            else\n                console.log body\n\n            callback err, body\n\n\nmodule.exports.getModel = (doctypeName, fields) ->\n\n    return new Model()\n\n\n\n\n###\n\ncozydb = require './path/to/cozydb-browser'\n\nContact = cozydb.getModel 'Contact', {}\n\nContact.create data, (err, body) ->\n    console.log err, body\n\n###\n","module.exports = (options, callback) ->\n\n    method = options.method or \"GET\"\n    {url, attributes} = options\n\n    xhr = new XMLHttpRequest()\n    xhr.open \"POST\", url, true\n\n    xhr.onload = ->\n        callback null, xhr.response\n\n    xhr.onerror = (err) ->\n        err = \"Request failed: #{err.target.status}\"\n        callback err\n\n    window.addEventListener \"message\", (event) ->\n        intent = event.data;\n        xhr.setRequestHeader \"Content-Type\", \"application/json\"\n        token = btoa \"#{intent.appName}:#{intent.token}\"\n        xhr.setRequestHeader \"Authorization\", \"Basic #{token}\"\n\n        if attributes?\n            xhr.send JSON.stringify(attributes)\n        else\n            xhr.send()\n    , true\n"]}